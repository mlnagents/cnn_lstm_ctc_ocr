[ссылка на датасет](https://drive.google.com/file/d/0B0U_CGyGjtSvTk9uakJoVV9SdW8/view)

#### 1_png2jpg.py

Конвертирует формат изображений png в jpg, изменяя соответствующим образом и дирекотрии в файлах аннотаций (скрипт следует перезапустить в случае добавления в датасет новых изображений в формате png; при повторном запуске или отсутсвии png-изображений скрипт ничего не делает).

#### 2_rescale.py

Изменяет размер изображений: делает высоту равной 32 пикселям и ширина изменяется процорционально.

#### 3_alphabet.py

Создает файл Dataset_symbols.txt c перечислением всех символов и количеством их повторений в датасете. В получившийся файл напротив каждого символа через пробел следует выставить одно из следующих значений:

- Новый символ, на который необходимо заменить старый во всех аннотациях датасета;

- 'OK' чтобы оставить символ как есть;

- 'SKIP' убрать символ без удаления изображения (например, таким образом убрать пробелы из датасета);

- 'DEL' удалить изображения с этим символом.

Если файл повторно запустить, то старые корректировки сохраняются. При этом, если в датасет были добавлены новые изображения, то в текстовом файле с алфавитом появятся новые символы и частотность всех символов обновится, у таких новых символов будет стоять в третьем столбце 'NEW_SYMBOL' - эту пометку необходимо заменить на один из вышеописанных вариантов.

#### 4_replace_text.py

Заменяет символы в датасете в соответствии с файлом Dataset_symbols.txt. Генерирует копии (в названиях добавлено "new") текстовых файлов с аннотациями, обновленных в соответствии с файлом Dataset_symbols.txt (при этом в качестве дополнительной проверки добавлен цикл по новому тексту gt-аннотации для исключения тех изображений, в которых после замены/пропуска символов остались только текстовые символы). Также генерирует второй, аналогичный первому, текстовый алфавитный файл Dataset_symbols_new.txt, но уже относительно обновленных файлов с аннотациями ("_new"). Новый алфавитный файл не требуется редактировать. Внутри только два столбца - символ алфавита и число его повторений.

#### 5_train_test_val.py

Создает три текстовых файла - train, test и val, где содержатся директории и gt-аннотации изображений (на основе обновленных (new) текстовых файлов аннотаций, созданных на предыдущем шаге). Датасет случайным образом разбивается в соотношении 80/10/10.

#### 6_dataset2tfrecord.py

Конвертер изображений в формат tfrecord. Скрипт, написанный для датасета MJSynth автором реализации crnn на tensorflow, переработан для нового датасета таким обзразом, чтобы на вход подавался текстовый файл с директорией к изображению и через пробел gt аннотация. Также добавлено исключение изображений с текстом более двух символов при соотношении сторон (ширина/высота) меньше единицы. Файлы в формате tfrecord буду записаны в папку tfrecords.

#### orientation.py

Копирует в папку Dataset_rotate изображения, соотношение ширины к высоте которых меньше единицы и длина тектса при этом больше двух символов.